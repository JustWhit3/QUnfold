# Main tox part
[tox]
requires =
    tox>=4
env_list = example_ROOT_sim, example_numpy_sim, tests, analysis, py{38} # 38,39,310,311

# Base tox configuration
[testenv]
description = base env information
allowlist_externals = sh
deps =
    -r requirements.txt
    -e src/
commands =
    black {posargs:.}
setenv =
    PYTHONPATH = src:{env:PYTHONPATH}

# Run tests configuration
[testenv:tests]
description = run unit tests
allowlist_externals = find
deps =
    {[testenv]deps}
commands =
    {[testenv]commands}
    pytest -v tests/
setenv =
    PYTHONPATH = HEP_deps/root/lib:{env:PYTHONPATH}

# Run example_ROOT_sim configuration
[testenv:example_ROOT_sim]
description = run ROOT sim example code
deps =
    {[testenv]deps}
commands =
    {[testenv]commands}
    python examples/ROOT_simulated_annealing.py
setenv =
    PYTHONPATH = HEP_deps/root/lib:{env:PYTHONPATH}

# Run example_numpy_sim configuration
[testenv:example_numpy_sim]
description = run numpy sim example code
deps =
    {[testenv]deps}
commands =
    {[testenv]commands}
    python examples/numpy_simulated_annealing.py

# Run analysis configuration
[testenv:analysis]
description = run analysis code
deps =
    {[testenv]deps}
commands =
    {[testenv]commands}
    python studies/analysis.py